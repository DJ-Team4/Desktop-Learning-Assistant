<Window x:Class="UI.FileWindow.FileWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:UI.FileWindow"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        xmlns:pu="clr-namespace:Panuon.UI.Silver;assembly=Panuon.UI.Silver"
        mc:Ignorable="d"
        Title="文件管理">
    <Window.Resources>
        <!-- 字体大小 -->
        <sys:Double x:Key="BaseFontSize">14</sys:Double>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="40" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Tool Bar -->
        <Grid Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="300" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <Grid.Resources>
                <Thickness x:Key="ToolbarItemMargin">4,4,4,4</Thickness>
            </Grid.Resources>

            <!-- Refresh Button -->
            <Button Grid.Column="0"
                    Name="refreshButtn"
                    BorderThickness="0"
                    Margin="{StaticResource ToolbarItemMargin}"
                    Style="{StaticResource {x:Static ToolBar.ButtonStyleKey}}">
                <Image Source="../Icon/refresh.jpg" />
            </Button>

            <!-- Tag Search Box -->
            <TextBox Grid.Column="1"
                     x:Name="tagSearchBox"
                     Margin="{StaticResource ToolbarItemMargin}"
                     Padding="2"
                     VerticalContentAlignment="Center">
                <TextBox.Style>
                    <Style TargetType="{x:Type TextBox}">
                        <Style.Resources>
                            <Style TargetType="{x:Type Border}">
                                <Setter Property="CornerRadius"
                                        Value="4" />
                            </Style>
                        </Style.Resources>
                    </Style>
                </TextBox.Style>
            </TextBox>

            <!-- Filename Search Box -->
            <TextBox Grid.Column="2"
                     Name="filenameSearchBox"
                     Margin="{StaticResource ToolbarItemMargin}" />

            <Button Grid.Column="3"
                    Name="addFileBtn"
                    Content="Add File"
                    Click="AddFileBtn_Click" />

        </Grid>

        <!-- Main Part -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <!-- Left Part: 导航栏 -->
            <StackPanel Grid.Row="0">
                <TextBlock Text="综合" />
                <ListView x:Name="upNavList"
                          ItemsSource="{Binding UpNavItems}"
                          SelectedValue="{Binding SelectedNavItem, Mode=TwoWay}"
                          SelectionMode="Single"
                          HorizontalAlignment="Stretch"
                          HorizontalContentAlignment="Stretch"
                          BorderThickness="0">
                    <ListView.ItemTemplate>
                        <DataTemplate DataType="{x:Type local:INavItem}">
                            <TextBlock Text="{Binding Header}" />
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Grid.Column="0"
                               Text="标签" />
                    <Button x:Name="addTagBtn"
                            Grid.Column="1"
                            Content="Add Tag"
                            Click="AddTagBtn_Click" />
                </Grid>
                <ListView x:Name="downNavList"
                          ItemsSource="{Binding DownNavItems}"
                          SelectedValue="{Binding SelectedNavItem, Mode=TwoWay}"
                          SelectionMode="Single"
                          HorizontalAlignment="Stretch"
                          HorizontalContentAlignment="Stretch"
                          BorderThickness="0">
                    <ListView.ItemTemplate>
                        <DataTemplate DataType="{x:Type local:INavItem}">
                            <TextBlock Text="{Binding Header}" />
                        </DataTemplate>
                    </ListView.ItemTemplate>

                    <ListView.Resources>
                        <ContextMenu x:Key="TagContextMenu">
                            <MenuItem Header="重命名"
                                      Click="RenameTagMenuItem_Click" />
                            <MenuItem Header="删除标签"
                                      Click="RemoveTagMenuItem_Click" />
                        </ContextMenu>
                    </ListView.Resources>

                    <ListView.ItemContainerStyle>
                        <Style TargetType="{x:Type ListViewItem}">
                            <Setter Property="ContextMenu"
                                    Value="{StaticResource TagContextMenu}" />
                        </Style>
                    </ListView.ItemContainerStyle>
                </ListView>
            </StackPanel>

            <!-- Right Part: File Area-->
            <Grid Grid.Column="1"
                  Background="LightYellow">
                <ListView ItemsSource="{Binding Files}"
                          SelectionMode="Single">
                    <ListView.ItemTemplate>
                        <DataTemplate DataType="{x:Type local:FileVM}">
                            <TextBlock Text="{Binding Name}" />
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </Grid>

        </Grid>

    </Grid>
</Window>
